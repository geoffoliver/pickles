$(document).ready(function(){jQuery().validate&&$("form").validate();$("form.ajax input[type=submit], form.ajax .submit").live("click",function(){var a=$(this).parents("form").get();$(".ajax-form-error, .ajax-form-message, label.error",a).fadeOut("normal",function(){$(this).remove()});if(typeof $(a).valid=="undefined"||$(a).valid()==!0){$("button, input, textarea",a).attr("readonly","readonly");document.body.style.cursor="wait";if(typeof CKEDITOR!="undefined"&&typeof CKEDITOR.instances!="undefined")for(var c in CKEDITOR.instances){var b=
CKEDITOR.instances[c].getData();b!=""&&$("#"+c).val(b)}c=$(a).attr("method")==""?"GET":$(a).attr("method");b=$(a).attr("action");b==""?(injectMessage(a,"Form element lacks action attribute","error"),$("button, input, textarea",a).removeAttr("readonly"),document.body.style.cursor="default"):$.ajax({type:c,url:b,data:$(a).serialize(),dataType:"json",success:function(b){if(b.status!="success"&&typeof b.message!="undefined")injectMessage(a,b.message,"error");else if(b.status=="success"){if($("input[type=text]",
a).val(""),$("select",a).val(""),$("textarea",a).val(""),typeof b.message!="undefined"&&injectMessage(a,b.message,"message"),typeof b.url!="undefined")parent.location.href=b.url}else injectMessage(a,b,"error");if(typeof b.callback!="undefined")window[b.callback](b);$("button, input, textarea",a).removeAttr("readonly");document.body.style.cursor="default"},error:function(b,c,f){injectMessage(a,f,"error");$("button, input, textarea",a).removeAttr("readonly");document.body.style.cursor="default"}})}else return!1});
$("form.ajax").submit(function(){return!1});$("table tr:even td").addClass("even");$("table tr:odd td").addClass("odd")});
function injectMessage(a,c,b,e){typeof b=="undefined"&&(b="error");switch(b){case "error":var d="#800";break;case "message":d="#080";break;default:d="#000"}b="ajax-form-"+b;d="display:none;color:"+d;$("."+b,a).remove();$(a).prepend('<div class="'+b+'" style="'+d+'" generated="true">'+c+"</div>");$("."+b,a).fadeIn();typeof e!="undefined"&&$("."+b,a).delay(e).fadeOut();return $("."+b,a)}function autoTab(a){$(a).val().length>=$(a).attr("maxlength")&&$(a).next().focus()}
function disableEnterKey(a){return(window.event?window.event.keyCode:a.which)!=13}function truncate(a,c,b){a.length>c&&(a=b==!0?'<span title="'+a+'" style="cursor:help">'+a.substring(0,c)+"...</span>":a.substring(0,c)+"...");return a};
